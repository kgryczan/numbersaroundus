<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Numbers around us">
<meta name="dcterms.date" content="2024-09-05">

<title>Guarding Against Misleading Data – Numbers Around Us</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-697306ee647f3aecb60be57249203282.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-3fe3df12cb322cd60d4f50ab5ce79ec8.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-71a1c0b2fece7d4d1d4daa5e23e0c0ad.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-00ab377d17f9c7e1b98bb5b1ff2b2f0e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Numbers Around Us</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../last-articles.html"> 
<span class="menu-text">Newest articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../challenges/index.html"> 
<span class="menu-text">Challenges</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../bi/index.html"> 
<span class="menu-text">Business Intelligence</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../ds/index.html"> 
<span class="menu-text">Data Science</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../dp/index.html"> 
<span class="menu-text">Data Philosophy</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com" title="Github" class="quarto-navigation-tool px-1" aria-label="Github"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Guarding Against Misleading Data</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Numbers around us </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 5, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="the-ibcs-check-principle" class="level2">
<h2 class="anchored" data-anchor-id="the-ibcs-check-principle">The IBCS ‘Check’ Principle</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/check.jpg" class="img-fluid figure-img"></p>
<figcaption>Guarding Against Misleading Data</figcaption>
</figure>
</div>
<p><strong>Disclaimer:</strong> While my work in this series draws inspiration from the IBCS® standards, I am not a certified IBCS® analyst or consultant. The visualizations and interpretations presented here are my personal attempts to apply these principles and may not fully align with the official IBCS® standards. I greatly appreciate the insights and framework provided by IBCS® and aim to explore and learn from their approach through my own lens.</p>
<p>In the complex world of business intelligence (BI), the ability to present data accurately and transparently is critical. Whether crafting a dashboard for executive decision-making or generating a report for operational analysis, the clarity and honesty of data visualization can make or break the effectiveness of the message. This is where the International Business Communication Standards (IBCS) come into play, offering a robust framework to ensure that data is communicated in a way that is both truthful and impactful.</p>
<p>One of the cornerstones of the IBCS framework is the acronym SUCCESS, which outlines a series of principles designed to improve the clarity, consistency, and effectiveness of business communication. Today, we focus on the “Check” principle, the second “C” in SUCCESS, which emphasizes the importance of guarding against misleading data.</p>
<p>The “Check” principle is all about ensuring the integrity of your visualizations. It’s not just about avoiding outright lies or fabrications—it’s about being vigilant against more subtle forms of misinformation that can creep into data presentation. These include manipulated axes, distorted visual elements, inconsistent scales, and unadjusted data that can lead to misinterpretation. The goal is to create visualizations that are honest, clear, and easy to understand, allowing decision-makers to trust the insights they derive from them.</p>
<p>In this episode, we will delve into the specifics of the “Check” principle as outlined by IBCS, exploring how to avoid common pitfalls in data visualization. We’ll discuss best practices for ensuring accurate and honest representation of data, supported by practical examples in R—a powerful tool for data analysis and visualization. Through these examples, we will see how R can be used not only to create effective visualizations but also to ensure that those visualizations adhere to the highest standards of accuracy and transparency.</p>
</section>
<section id="avoiding-manipulated-axes" class="level2">
<h2 class="anchored" data-anchor-id="avoiding-manipulated-axes">Avoiding Manipulated Axes</h2>
<p>One of the most common ways that data visualizations can mislead is through the manipulation of axes. The scale and type of axis chosen for a chart can significantly influence how the data is perceived, potentially distorting the reality that the data represents. The IBCS “Check” principle advises against several specific practices that can lead to such distortions, including truncated axes, logarithmic scales used without clear indication, and inconsistent categorical axes.</p>
<section id="truncated-axes" class="level3">
<h3 class="anchored" data-anchor-id="truncated-axes">Truncated Axes</h3>
<p>Truncated axes, particularly on bar or line charts, can exaggerate differences between data points. This technique involves starting the axis at a value other than zero, which can make relatively small differences in data appear much larger than they are. While this can sometimes be done to highlight important variations, it often risks misleading the viewer.</p>
<p>For example, consider a chart showing year-over-year revenue growth. If the y-axis is truncated to start at $1 million rather than $0, the growth might appear more dramatic than it truly is, leading viewers to overestimate the company’s performance.</p>
<p><strong>Illustration in R:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Data example</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Year =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Revenue =</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">1.3</span>, <span class="fl">1.4</span>) <span class="co"># In millions</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Truncated axis example</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Revenue)) <span class="sc">+</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.5</span>)) <span class="sc">+</span> <span class="co"># Keep data within limits</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Revenue Growth (Truncated Axis)"</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Revenue (in millions)"</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*io9GjAOA3r9MbX5SINK_lQ.png" class="img-fluid figure-img"></p>
<figcaption>Truncated Axis</figcaption>
</figure>
</div>
<p>This code produces a bar chart with a truncated y-axis starting at $1 million. The resulting visualization exaggerates the growth in revenue, making a modest increase seem much more significant.</p>
<p><strong>Correct Approach:</strong> To avoid misleading the audience, it’s generally better to start axes at zero, especially in bar charts where the length of the bars is meant to be proportional to the value they represent.</p>
<p><strong>Illustration in R:</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct axis example</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Revenue)) <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">1.5</span>)) <span class="sc">+</span> <span class="co"># Axis starts at zero</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Revenue Growth (Proper Axis)"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Revenue (in millions)"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*C008lbiHd_53ikjGzLQsGg.png" class="img-fluid figure-img"></p>
<figcaption>Proper Axis</figcaption>
</figure>
</div>
<p>This version of the chart starts the y-axis at $0, providing a more honest representation of the revenue growth over time.</p>
</section>
<section id="logarithmic-scales-with-different-magnitudes" class="level3">
<h3 class="anchored" data-anchor-id="logarithmic-scales-with-different-magnitudes">Logarithmic Scales with Different Magnitudes</h3>
<p><strong>Misleading Example: Logarithmic Scale Without Clear Indication</strong></p>
<p>Let’s consider a dataset representing company revenues across several years. The revenues vary widely, from thousands to millions. A logarithmic scale can be useful here, but without proper indication, it can mislead viewers about the magnitude of differences.</p>
<p><strong>Data Example:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example dataset with varying magnitudes</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Year =</span> <span class="fu">c</span>(<span class="st">"2010"</span>, <span class="st">"2011"</span>, <span class="st">"2012"</span>, <span class="st">"2013"</span>, <span class="st">"2014"</span>, <span class="st">"2015"</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Revenue =</span> <span class="fu">c</span>(<span class="dv">10</span><span class="sc">^</span><span class="dv">3</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">4</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">5</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">7</span>, <span class="dv">10</span><span class="sc">^</span><span class="dv">8</span>) <span class="co"># Revenues from $1,000 to $100,000,000</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Misleading log scale example</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data1, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Revenue)) <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span> <span class="co"># Logarithmic scale applied without clear labeling</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Revenue Growth (Logarithmic Scale)"</span>,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Revenue"</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*qk6uwbo4kEpEG_F-fvnGIA.png" class="img-fluid figure-img"></p>
<figcaption>Logarithmic Scale</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong> In this chart, the y-axis uses a logarithmic scale, but the labels and title do not clearly communicate this to the viewer. The impression given is that the changes in revenue are linear, which is misleading since each year represents a tenfold increase.</p>
</section>
<section id="proper-example-logarithmic-scale-with-clear-indication" class="level3">
<h3 class="anchored" data-anchor-id="proper-example-logarithmic-scale-with-clear-indication">Proper Example: Logarithmic Scale with Clear Indication</h3>
<p>To correctly use a logarithmic scale, it should be clearly labeled, and the viewer should be informed about the scale being used.</p>
<p><strong>Proper Visualization:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Properly labeled log scale example</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data1, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Revenue)) <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span> <span class="co"># Clear logarithmic scale with labels</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Revenue Growth (Logarithmic Scale)"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Revenue (log scale)"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">4</span>, <span class="at">y =</span> <span class="fl">1e4</span>, <span class="at">label =</span> <span class="st">"Logarithmic Scale"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*hLAFxV0l7Y9UNadhYn_8pg.png" class="img-fluid figure-img"></p>
<figcaption>Proper Logarithmic Scale</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong> This version properly labels the y-axis to indicate that a logarithmic scale is being used. Annotations or additional explanations could further help viewers understand the exponential growth represented in the data.</p>
</section>
<section id="proper-example-linear-scale-for-direct-comparison" class="level3">
<h3 class="anchored" data-anchor-id="proper-example-linear-scale-for-direct-comparison">Proper Example: Linear Scale for Direct Comparison</h3>
<p>Using a linear scale can sometimes be more appropriate, especially when the goal is to show absolute differences between values rather than relative differences.</p>
<p><strong>Proper Visualization with Linear Scale:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data1, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Revenue)) <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span> <span class="co"># Linear scale</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Revenue Growth (Linear Scale)"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Revenue"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*b0H6FaEGRS13cEEAc1hJIQ.png" class="img-fluid figure-img"></p>
<figcaption>Linear Scale</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong> In this version, the y-axis uses a linear scale. This chart clearly shows the absolute differences in revenue over time. While it may be less effective at showing relative growth, it avoids the potential for misinterpretation that can come with a logarithmic scale. It’s particularly useful when the focus is on the actual increase in revenue rather than the rate of growth.</p>
</section>
</section>
<section id="categorical-axes-with-age-buckets" class="level2">
<h2 class="anchored" data-anchor-id="categorical-axes-with-age-buckets">Categorical Axes with Age Buckets</h2>
<section id="misleading-example-unequal-bucket-widths" class="level3">
<h3 class="anchored" data-anchor-id="misleading-example-unequal-bucket-widths">Misleading Example: Unequal Bucket Widths</h3>
<p>Let’s create a bar chart displaying age distribution across different age ranges. A misleading version might use buckets of varying widths, which can distort the representation of the data.</p>
<p><strong>Data Example:</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>age_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_Group =</span> <span class="fu">c</span>(<span class="st">"0-18"</span>, <span class="st">"19-25"</span>, <span class="st">"26-40"</span>, <span class="st">"41-60"</span>, <span class="st">"60+"</span>),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Count =</span> <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">300</span>, <span class="dv">1000</span>, <span class="dv">700</span>, <span class="dv">200</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(age_data, <span class="fu">aes</span>(<span class="at">x =</span> Age_Group, <span class="at">y =</span> Count)) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Distribution (Inconsistent Buckets)"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Group"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*rkrhxXXKd8OxR1CAwcEXnA.png" class="img-fluid figure-img"></p>
<figcaption>Inconsistent Buckets</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong> In this chart, the age buckets are not equally spaced, which can mislead viewers into thinking that each bucket represents an equal range of years. For example, “26-40” covers 15 years, whereas “19-25” covers only 7 years, yet they are presented as equivalent.</p>
</section>
<section id="proper-example-equal-bucket-widths" class="level3">
<h3 class="anchored" data-anchor-id="proper-example-equal-bucket-widths">Proper Example: Equal Bucket Widths</h3>
<p>A proper approach would use equal-width buckets or clearly indicate that the buckets are of different sizes.</p>
<p><strong>Proper Visualization:</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted data for equally wide buckets</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>age_data_proper <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_Group =</span> <span class="fu">c</span>(<span class="st">"0-10"</span>, <span class="st">"11-20"</span>, <span class="st">"21-30"</span>, <span class="st">"31-40"</span>, <span class="st">"41-50"</span>, <span class="st">"51-60"</span>, <span class="st">"61-70"</span>, <span class="st">"71+"</span>),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Count =</span> <span class="fu">c</span>(<span class="dv">250</span>, <span class="dv">250</span>, <span class="dv">400</span>, <span class="dv">600</span>, <span class="dv">400</span>, <span class="dv">300</span>, <span class="dv">150</span>, <span class="dv">200</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Proper bar chart with consistent bucket widths</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(age_data_proper, <span class="fu">aes</span>(<span class="at">x =</span> Age_Group, <span class="at">y =</span> Count)) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Distribution (Consistent Buckets)"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Group"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*O-S_VR9HCDrWALMy9iXMCA.png" class="img-fluid figure-img"></p>
<figcaption>Consistent Buckets</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong> This version uses consistent 10-year buckets, which gives a more accurate representation of the distribution. Each bar represents an equivalent range, allowing for fair comparison across age groups.</p>
<p>By avoiding misleading practices such as improper use of logarithmic scales and inconsistent categorical bucket sizes, you ensure that your visualizations are clear and truthful. The examples provided highlight how these issues can arise and how to correct them, maintaining the integrity of your data presentation in line with the IBCS “Check” principle.</p>
</section>
</section>
<section id="avoiding-manipulated-visualization-elements" class="level2">
<h2 class="anchored" data-anchor-id="avoiding-manipulated-visualization-elements">Avoiding Manipulated Visualization Elements</h2>
<p>In data visualization, the elements used to represent data—such as bars, lines, and shapes—must be carefully crafted to avoid misleading the audience. Manipulated visualization elements can distort the viewer’s perception, leading to incorrect conclusions. The IBCS “Check” principle highlights the importance of using visualization elements that accurately and honestly represent the underlying data. This section will explore common pitfalls in the use of visualization elements and discuss how to avoid them.</p>
<section id="distorted-element-sizes" class="level3">
<h3 class="anchored" data-anchor-id="distorted-element-sizes">Distorted Element Sizes</h3>
<p>One common issue in data visualization is the use of elements whose sizes do not correspond proportionally to the data they represent. This is particularly problematic in area-based visualizations, such as pie charts or bubble charts, where the size of the visual element should reflect the magnitude of the data point.</p>
<p><strong>Misleading Example:</strong> Consider a bubble chart where the area of the bubbles is used to represent the magnitude of data points. If the radius of the bubbles is scaled directly to the data, rather than the area, the visual representation will exaggerate differences between data points.</p>
<p><strong>Proper Example:</strong> The correct approach is to scale the area of the bubbles proportionally to the data values, ensuring that visual differences match the actual data.</p>
</section>
<section id="inappropriate-use-of-3d-effects" class="level3">
<h3 class="anchored" data-anchor-id="inappropriate-use-of-3d-effects">Inappropriate Use of 3D Effects</h3>
<p>3D charts can sometimes make data appear more dynamic or engaging, but they often introduce visual distortions that make it difficult to accurately interpret the data. The use of 3D effects can obscure important details or exaggerate differences, making the visualization more decorative than informative.</p>
<p><strong>Misleading Example:</strong> Consider a 3D bar chart where the depth and perspective distort the actual height of the bars.</p>
<p><strong>Proper Example:</strong> A 2D bar chart is often more effective at accurately conveying differences between data points without introducing unnecessary visual complexity.</p>
<blockquote class="blockquote">
<p>IMHO: 3D effects should be banned in BI and reporting.</p>
</blockquote>
</section>
<section id="challenging-scaling-with-a-bar-chart" class="level3">
<h3 class="anchored" data-anchor-id="challenging-scaling-with-a-bar-chart">Challenging Scaling with a Bar Chart</h3>
<p><strong>Misleading Example: Bar Chart with One Large Value</strong></p>
<p>When one data point is significantly larger than the others, a standard bar chart can make it difficult to see and compare the smaller values.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example dataset with a large outlier</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>scaling_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Category =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Value =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">500</span>) <span class="co"># Notice the large value in Category E</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Misleading bar chart example</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scaling_data, <span class="fu">aes</span>(<span class="at">x =</span> Category, <span class="at">y =</span> Value)) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Bar Chart with Challenging Scaling"</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*kXvA7qecs4SUvWhIQ5JhKA.png" class="img-fluid figure-img"></p>
<figcaption>Challenging Scaling</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>In this bar chart, the large value in Category E completely overshadows the smaller values, making them almost invisible and difficult to compare. This visual dominance can lead to a skewed perception of the data, where the smaller categories appear insignificant.</li>
</ul>
</section>
<section id="proper-imo-visualization-waffle-chart" class="level3">
<h3 class="anchored" data-anchor-id="proper-imo-visualization-waffle-chart">Proper (IMO) Visualization: Waffle Chart</h3>
<p>A waffle chart is a grid-based visualization where each cell represents a fixed unit (e.g., 1% of the total). It’s particularly effective when dealing with data that has a wide range of values because it allows the viewer to see the proportional representation of each category without being overwhelmed by a single large value.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(waffle)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Proper waffle chart example</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>waffle_data <span class="ot">&lt;-</span> <span class="fu">round</span>(scaling_data<span class="sc">$</span>Value <span class="sc">/</span> <span class="fu">sum</span>(scaling_data<span class="sc">$</span>Value) <span class="sc">*</span> <span class="dv">100</span>)  <span class="co"># Convert to percentages</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>waffle<span class="sc">::</span><span class="fu">waffle</span>(waffle_data, <span class="at">rows =</span> <span class="dv">10</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">"lightblue"</span>, <span class="st">"lightgreen"</span>, <span class="st">"lightpink"</span>, <span class="st">"orange"</span>, <span class="st">"darkred"</span>),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">title =</span> <span class="st">"Waffle Chart Showing Proportions"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*YIcYWmlwbiTl9d3c4VszFg.png" class="img-fluid figure-img"></p>
<figcaption>Waffle Chart</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>The waffle chart divides the total value into 100 squares, each representing 1% of the total. This allows each category to be seen in proportion to its contribution to the whole, regardless of how large or small it is.</li>
<li>Unlike the bar chart, the waffle chart gives a clear visual representation of each category’s size relative to the others, making it easier to understand the overall distribution without one category overwhelming the others.</li>
</ul>
<p>Manipulated visualization elements can easily distort the message that data is meant to convey. Whether it’s through improperly scaled bubbles, the misleading use of 3D effects, or poorly handled scaling challenges, such practices can lead to misinterpretation and poor decision-making. By adhering to the IBCS “Check” principle, you ensure that your visual elements accurately represent the underlying data. This means scaling areas correctly, avoiding unnecessary and potentially confusing 3D effects, and choosing the right type of chart to convey the information clearly, even when dealing with data that varies widely in magnitude. By following these guidelines, you create visualizations that are not only honest and precise but also genuinely informative and trustworthy.</p>
</section>
</section>
<section id="avoiding-misleading-representation" class="level2">
<h2 class="anchored" data-anchor-id="avoiding-misleading-representation">Avoiding Misleading Representation</h2>
<p>In data visualization, the way data is represented can have a significant impact on how it is interpreted. Misleading representation can occur when visual elements distort the relationships between data points, exaggerate differences, or obscure important details. The IBCS “Check” principle advises against using representations that could mislead the viewer, whether intentionally or unintentionally. This section will explore common pitfalls in data representation and demonstrate how to avoid them.</p>
<section id="misuse-of-area-and-volume-to-represent-data" class="level3">
<h3 class="anchored" data-anchor-id="misuse-of-area-and-volume-to-represent-data">Misuse of Area and Volume to Represent Data</h3>
<p>One of the most common sources of misleading representation in data visualization is the misuse of area or volume to represent data values. For instance, using 2D shapes (like circles) or 3D objects (like cubes or spheres) to represent numerical data can be problematic because viewers tend to perceive the area or volume of these shapes as directly proportional to their size. However, as we discussed earlier, the area of a circle is proportional to the square of its radius, and the volume of a 3D object is proportional to the cube of its dimensions. This can cause significant distortions if not handled correctly.</p>
<p><strong>Misleading Example:</strong> Let’s consider a scenario where we use circles to represent population sizes across different cities. If the radii of the circles are directly proportional to the population, the visual impression will exaggerate the differences between cities.</p>
<p><strong>Proper Example:</strong> The correct approach is to scale the radius of the circles according to the square root of the population, ensuring that the area of each circle is proportional to the population it represents.</p>
<p><strong>Data Example:</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Example dataset with city populations</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>population_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">City =</span> <span class="fu">c</span>(<span class="st">"City A"</span>, <span class="st">"City B"</span>, <span class="st">"City C"</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Population =</span> <span class="fu">c</span>(<span class="dv">1000000</span>, <span class="dv">2000000</span>, <span class="dv">4000000</span>) <span class="co"># Population in millions</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Misleading bubble chart example</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>imp <span class="ot">=</span> <span class="fu">ggplot</span>(population_data, <span class="fu">aes</span>(<span class="at">x =</span> City, <span class="at">y =</span> Population, <span class="at">size =</span> Population)) <span class="sc">+</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">20</span>)) <span class="sc">+</span> <span class="co"># Radius scaled directly to population</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Misleading Representation of Population Sizes"</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Population"</span>,</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"City"</span>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Proper bubble chart with area scaled to population</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>p <span class="ot">=</span> <span class="fu">ggplot</span>(population_data, <span class="fu">aes</span>(<span class="at">x =</span> City, <span class="at">y =</span> Population, <span class="at">size =</span> <span class="fu">sqrt</span>(Population))) <span class="sc">+</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">fill =</span> <span class="st">"green3"</span>) <span class="sc">+</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">20</span>) <span class="sc">+</span> <span class="co"># Ensuring the area scales properly</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Accurate Representation of Population Sizes"</span>,</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Population"</span>,</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"City"</span>)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>imp <span class="sc">+</span> p <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*sSwGYLTYb7lAtE2SRrglRg.png" class="img-fluid figure-img"></p>
<figcaption>Bubble Chart</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>In this chart, the size of each circle is determined by the population value. Since the size is mapped to the radius, the area of the circles does not accurately reflect the actual population differences. For example, the circle for City C (with a population of 4 million) will appear disproportionately large compared to City A (with 1 million), even though the population is only four times larger.</li>
<li>By using <code>sqrt(Population)</code> for the size aesthetic, the area of each circle now correctly represents the population. This makes the visual differences between cities proportional to the actual data, providing an accurate and honest representation.</li>
</ul>
</section>
<section id="avoiding-misleading-representation-on-maps" class="level3">
<h3 class="anchored" data-anchor-id="avoiding-misleading-representation-on-maps">Avoiding Misleading Representation on Maps</h3>
<p>Maps are a powerful tool for visualizing geographical data, but they also come with their own set of challenges. The way data is represented across different regions can significantly influence how it is interpreted. A common pitfall is the use of color gradients on choropleth maps, which can exaggerate or understate differences between regions, leading to misinterpretation. This is especially problematic when visualizing percentage data, such as unemployment rates, where subtle differences might be magnified or diminished depending on the color scale used.</p>
<p>Let’s assume we’re displaying the unemployment rate for each state in a specific region (e.g., California, Utah, Nevada, Arizona, Colorado, and New Mexico). The improper visualization will use a gradient that can be misleading, while the proper visualization will use small pie charts to represent the percentage visually.</p>
</section>
<section id="data-preparation" class="level3">
<h3 class="anchored" data-anchor-id="data-preparation">Data Preparation</h3>
<p>We’ll start by creating a dataset with fictional unemployment rates for each of the selected states.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example dataset with unemployment rates for selected states</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>unemployment_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">State =</span> <span class="fu">c</span>(<span class="st">"California"</span>, <span class="st">"Utah"</span>, <span class="st">"Nevada"</span>, <span class="st">"Arizona"</span>, <span class="st">"Colorado"</span>, <span class="st">"New Mexico"</span>),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">UnemploymentRate =</span> <span class="fu">c</span>(<span class="fl">7.8</span>, <span class="fl">3.1</span>, <span class="fl">6.4</span>, <span class="fl">5.2</span>, <span class="fl">4.0</span>, <span class="fl">6.9</span>) <span class="co"># Fictional data</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapping the state names to match map data</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>unemployment_data<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">tolower</span>(unemployment_data<span class="sc">$</span>State)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="improper-visualization-gradient-choropleth-map" class="level3">
<h3 class="anchored" data-anchor-id="improper-visualization-gradient-choropleth-map">Improper Visualization: Gradient Choropleth Map</h3>
<p>In this example, we’ll use a color gradient to represent the unemployment rate. This can be misleading because it might exaggerate or understate the differences between states, especially when the differences are relatively small.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the map data for selected states</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>states_map <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"state"</span>, <span class="at">region =</span> <span class="fu">c</span>(<span class="st">"california"</span>, <span class="st">"utah"</span>, <span class="st">"nevada"</span>, <span class="st">"arizona"</span>, <span class="st">"colorado"</span>, <span class="st">"new mexico"</span>))</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Improper gradient map</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(unemployment_data, <span class="fu">aes</span>(<span class="at">map_id =</span> State, <span class="at">fill =</span> UnemploymentRate)) <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(<span class="at">map =</span> states_map, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">x =</span> states_map<span class="sc">$</span>long, <span class="at">y =</span> states_map<span class="sc">$</span>lat) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"lightblue"</span>, <span class="at">high =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Improper Representation: Unemployment Rate by State"</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Unemployment Rate (%)"</span>) <span class="sc">+</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*PdokEt8m4VcGAtifRTebWg.png" class="img-fluid figure-img"></p>
<figcaption>Improper Gradient Map</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>This choropleth map uses a gradient to show the unemployment rate across the selected states. However, the use of color alone can mislead viewers by making small differences seem more significant than they are, especially when using a broad color range.</li>
</ul>
</section>
<section id="proper-visualization-pie-charts-for-each-state" class="level3">
<h3 class="anchored" data-anchor-id="proper-visualization-pie-charts-for-each-state">Proper Visualization: Pie Charts for Each State</h3>
<p>To provide a clearer and more precise visual representation, we’ll place small pie charts on each state to represent the unemployment rate. This approach allows the viewer to see the exact proportions, reducing the risk of misinterpretation.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggforce)  <span class="co"># For making pie charts on maps</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>create_pie_grob <span class="ot">&lt;-</span> <span class="cf">function</span>(rate) {</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  pie_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span> <span class="sc">-</span> rate, rate)  <span class="co"># Employed vs. Unemployed</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  pie_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">category =</span> <span class="fu">c</span>(<span class="st">"Employed"</span>, <span class="st">"Unemployed"</span>),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> pie_values</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  gg_pie <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pie_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> value, <span class="at">fill =</span> category, <span class="at">colour =</span> <span class="st">"black"</span>)) <span class="sc">+</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"lightgreen"</span>, <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotGrob</span>(gg_pie)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Base map</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>base_map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(states_map, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">fill =</span> <span class="st">"lightgrey"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>(<span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Proper Representation: Unemployment Rate by State"</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Add pie charts to the map</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(unemployment_data)) {</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>  state <span class="ot">&lt;-</span> unemployment_data<span class="sc">$</span>State[i]</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>  rate <span class="ot">&lt;-</span> unemployment_data<span class="sc">$</span>UnemploymentRate[i]</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the center of the state</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>  state_center <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">long =</span> <span class="fu">mean</span>(states_map<span class="sc">$</span>long[states_map<span class="sc">$</span>region <span class="sc">==</span> state]),</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>                             <span class="at">lat =</span> <span class="fu">mean</span>(states_map<span class="sc">$</span>lat[states_map<span class="sc">$</span>region <span class="sc">==</span> state]))</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add pie chart at the center</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>  base_map <span class="ot">&lt;-</span> base_map <span class="sc">+</span> </span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotation_custom</span>(<span class="at">grob =</span> <span class="fu">create_pie_grob</span>(rate), </span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>                      <span class="at">xmin =</span> state_center<span class="sc">$</span>long <span class="sc">-</span> <span class="fl">1.5</span>, </span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>                      <span class="at">xmax =</span> state_center<span class="sc">$</span>long <span class="sc">+</span> <span class="fl">1.5</span>, </span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>                      <span class="at">ymin =</span> state_center<span class="sc">$</span>lat <span class="sc">-</span> <span class="fl">1.5</span>, </span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>                      <span class="at">ymax =</span> state_center<span class="sc">$</span>lat <span class="sc">+</span> <span class="fl">1.5</span>)</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the map</span></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(base_map)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*fqxp-uiE61Wbl0xp6DWB5w.png" class="img-fluid figure-img"></p>
<figcaption>Proper Pie Chart Map</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>In this visualization, small pie charts are placed on each state, showing the unemployment rate directly as a percentage. This approach makes it easier to compare the unemployment rates between states without relying on potentially misleading color gradients.</li>
<li><strong><code>create_pie_grob</code> Function</strong>: This function generates a pie chart for the given unemployment rate. It creates a small pie chart using <code>ggplot2</code>, which is then converted into a grob (graphical object) using <code>ggplotGrob</code> for placement on the map.</li>
<li><strong><code>annotation_custom</code></strong>: This function is used to place the pie chart at the center of each state on the map. The size of the pie chart is adjusted for visibility.</li>
<li><strong>Color Representation</strong>: The pie chart shows the proportion of employed (green) vs.&nbsp;unemployed (red), making it easy to interpret the unemployment rate visually.</li>
</ul>
<p>Using a gradient to represent percentage data on maps can be misleading, particularly when the differences are subtle or when the scale isn’t intuitively understood by the viewer. By contrast, using small pie charts to directly represent percentages for each region offers a clearer and more accurate depiction of the data. This approach adheres to the IBCS “Check” principle by ensuring that visualizations are both informative and easy to interpret, minimizing the risk of misinterpretation.</p>
</section>
</section>
<section id="using-consistent-scales-across-visuals" class="level2">
<h2 class="anchored" data-anchor-id="using-consistent-scales-across-visuals">Using Consistent Scales Across Visuals</h2>
<p>One of the key principles of effective data visualization is the consistent use of scales across related charts. When multiple charts are used to compare different datasets, using inconsistent scales can lead to misleading interpretations and poor decision-making. The IBCS “Check” principle emphasizes the importance of maintaining consistent scales to ensure that viewers can accurately compare data across different visualizations.</p>
<section id="the-importance-of-consistent-scales" class="level3">
<h3 class="anchored" data-anchor-id="the-importance-of-consistent-scales">The Importance of Consistent Scales</h3>
<p>Inconsistent scales can drastically alter the perception of data. For example, two bar charts displaying sales figures for different products may appear to show similar performance, but if the y-axis scales are different, the charts might be hiding significant differences. This can occur when different charts are automatically scaled based on their data range, leading to misleading comparisons.</p>
<p>When charts are presented together, it is crucial that they use the same scale, especially when they represent the same units. This allows for an accurate visual comparison between datasets. Consistent scaling also applies to time series data, where inconsistent x-axes can distort the perceived timing of events or trends.</p>
</section>
<section id="example-inconsistent-vs.-consistent-scales-in-bar-charts" class="level3">
<h3 class="anchored" data-anchor-id="example-inconsistent-vs.-consistent-scales-in-bar-charts">Example: Inconsistent vs.&nbsp;Consistent Scales in Bar Charts</h3>
<p><strong>Inconsistent Scales Example:</strong> Let’s consider two bar charts representing sales data for two different products over the same period. If each chart is scaled independently, the differences in sales might be exaggerated or minimized, leading to misinterpretation.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Example sales data for two products</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>product_a <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Month =</span> <span class="fu">c</span>(<span class="st">"January"</span>, <span class="st">"February"</span>, <span class="st">"March"</span>, <span class="st">"April"</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sales =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">90</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>product_b <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Month =</span> <span class="fu">c</span>(<span class="st">"January"</span>, <span class="st">"February"</span>, <span class="st">"March"</span>, <span class="st">"April"</span>),</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sales =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Inconsistent scales for Product A and Product B</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(product_a, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Sales)) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Product A Sales"</span>, <span class="at">y =</span> <span class="st">"Sales"</span>, <span class="at">x =</span> <span class="st">"Month"</span>) <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(product_b, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Sales)) <span class="sc">+</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightgreen"</span>) <span class="sc">+</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Product B Sales"</span>, <span class="at">y =</span> <span class="st">"Sales"</span>, <span class="at">x =</span> <span class="st">"Month"</span>) <span class="sc">+</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the charts</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*ROgbTgoBdCpCqEiTUxf5hA.png" class="img-fluid figure-img"></p>
<figcaption>Inconsistent Scales</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>In these charts, the y-axis scales are different. This can mislead viewers into thinking that Product B’s sales are comparable to Product A’s, when in reality, the scales hide the true difference in sales performance.</li>
</ul>
<p><strong>Proper Example: Consistent Scales Across Charts</strong> To provide a truthful comparison, the scales of the y-axes should be consistent across the two charts.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Consistent scales for Product A and Product B</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>p1_consistent <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(product_a, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Sales)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Product A Sales"</span>, <span class="at">y =</span> <span class="st">"Sales"</span>, <span class="at">x =</span> <span class="st">"Month"</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">100</span>)  <span class="co"># Setting the same y-axis scale</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>p2_consistent <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(product_b, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Sales)) <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightgreen"</span>) <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Product B Sales"</span>, <span class="at">y =</span> <span class="st">"Sales"</span>, <span class="at">x =</span> <span class="st">"Month"</span>) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">100</span>)  <span class="co"># Setting the same y-axis scale</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the charts with consistent scales</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>p1_consistent <span class="sc">+</span> p2_consistent <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*lI6yRhMBIcNSRsozjXCfcg.png" class="img-fluid figure-img"></p>
<figcaption>Consistent Scales</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>By using the same y-axis scale on both charts (<code>ylim(0, 100)</code>), viewers can immediately see that Product A’s sales are significantly higher than Product B’s. This consistent scaling enables a fair and accurate comparison.</li>
</ul>
</section>
<section id="techniques-for-handling-outliers-and-scaling-issues" class="level3">
<h3 class="anchored" data-anchor-id="techniques-for-handling-outliers-and-scaling-issues">Techniques for Handling Outliers and Scaling Issues</h3>
<ol type="1">
<li><strong>Inset Zooming Composition</strong>:</li>
</ol>
<ul>
<li>An inset chart is a smaller chart embedded within a larger one, typically used to zoom in on a specific part of the data. This allows viewers to focus on important details that might be overshadowed by the overall scale of the data.</li>
</ul>
<ol type="1">
<li><strong>Scaling Indicators</strong>:</li>
</ol>
<ul>
<li>Scaling indicators visually indicate that the scales of the compared charts differ, helping to prevent misleading interpretations. These indicators, like the dotted line in your image, make it clear that the two charts are on different scales.</li>
</ul>
</section>
<section id="implementation-in-r" class="level3">
<h3 class="anchored" data-anchor-id="implementation-in-r">Implementation in R</h3>
<p>Let’s create a combined plot that includes both techniques: an inset zoom and scaling indicators.</p>
</section>
<section id="example-data" class="level3">
<h3 class="anchored" data-anchor-id="example-data">Example Data</h3>
<p>We’ll use fictional sales and profit data for this demonstration, similar to what’s depicted in the image.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Example sales and profit data</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Month =</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Feb"</span>, <span class="st">"Mar"</span>, <span class="st">"Apr"</span>, <span class="st">"May"</span>, <span class="st">"Jun"</span>, <span class="st">"Jul"</span>), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Feb"</span>, <span class="st">"Mar"</span>, <span class="st">"Apr"</span>, <span class="st">"May"</span>, <span class="st">"Jun"</span>, <span class="st">"Jul"</span>)),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sales =</span> <span class="fu">c</span>(<span class="dv">55</span>, <span class="dv">50</span>, <span class="dv">53</span>, <span class="dv">54</span>, <span class="dv">51</span>, <span class="dv">55</span>, <span class="dv">52</span>),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Profit =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="fl">2.5</span>, <span class="dv">3</span>, <span class="fl">2.2</span>, <span class="fl">3.1</span>, <span class="dv">2</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Base chart for Sales</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>p_sales <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Sales)) <span class="sc">+</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"grey20"</span>) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sales in mUSD"</span>, <span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">100</span>) <span class="sc">+</span>  <span class="co"># Scale is manually set for visual comparison</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Inset chart for Profit</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>p_profit <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Profit)) <span class="sc">+</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"grey20"</span>) <span class="sc">+</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Profit in mUSD"</span>, <span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">10</span>) <span class="sc">+</span>  <span class="co"># Scale is manually set for visual comparison</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine Sales and Profit with inset and scaling indicators using inset_element</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>combined_plot <span class="ot">&lt;-</span> p_sales <span class="sc">+</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inset_element</span>(p_profit, <span class="at">left =</span> <span class="fl">0.6</span>, <span class="at">bottom =</span> <span class="fl">0.6</span>, <span class="at">right =</span> <span class="fl">0.95</span>, <span class="at">top =</span> <span class="fl">0.95</span>) <span class="co"># Adjust inset position and size</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the combined plot</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(combined_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*m5tX3yTWr7wCtwojHlDAzg.png" class="img-fluid figure-img"></p>
<figcaption>Combined Plot</figcaption>
</figure>
</div>
</section>
</section>
<section id="explanation" class="level2">
<h2 class="anchored" data-anchor-id="explanation">Explanation:</h2>
<ul>
<li><strong><code>inset_element(p_profit, left = 0.6, bottom = 0.6, right = 0.95, top = 0.95)</code></strong>: This function from the <code>patchwork</code> package is used to place the profit chart as an inset within the sales chart. The arguments (<code>left</code>, <code>bottom</code>, <code>right</code>, <code>top</code>) control the position and size of the inset.</li>
</ul>
<p>This method using <code>inset_element</code> simplifies the placement of inset charts within <code>ggplot2</code> plots while maintaining clarity and accuracy in your visualizations.</p>
<p>Using inset zooms and scaling indicators is an effective way to present data with vastly different scales in a single visualization. This approach adheres to the IBCS “Check” principle, ensuring clarity and accuracy in your data comparisons. These techniques help the audience understand the relationships between different datasets without being misled by scale differences.</p>
</section>
<section id="showing-data-adjustments-transparently" class="level2">
<h2 class="anchored" data-anchor-id="showing-data-adjustments-transparently">Showing Data Adjustments Transparently</h2>
<p>Transparency in data reporting is crucial, especially when adjustments such as inflation, currency conversion, or seasonal adjustments are applied to the data. These adjustments can significantly alter the interpretation of the data, and if not communicated clearly, they can lead to misunderstandings or misinterpretation. The IBCS “Check” principle stresses the importance of clearly indicating when and how data has been adjusted, ensuring that the audience can accurately understand the context and implications of the presented figures.</p>
<section id="importance-of-transparency-in-data-adjustments" class="level3">
<h3 class="anchored" data-anchor-id="importance-of-transparency-in-data-adjustments">Importance of Transparency in Data Adjustments</h3>
<p>Data adjustments are often necessary to make meaningful comparisons over time or across different regions. For example, when comparing financial data across years, it’s common to adjust for inflation to reflect real purchasing power rather than nominal values. Similarly, when comparing financial performance across countries, currency conversions might be necessary to provide a consistent basis for comparison. However, if these adjustments are not clearly communicated, the data can be misleading.</p>
<p>Transparency in these adjustments involves not only stating that an adjustment has been made but also explaining the method used and its impact on the data. This ensures that the audience understands the basis for the figures they are seeing and can interpret them correctly.</p>
</section>
<section id="example-adjusting-for-inflation" class="level3">
<h3 class="anchored" data-anchor-id="example-adjusting-for-inflation">Example: Adjusting for Inflation</h3>
<p>Let’s consider an example where we need to compare revenue over several years. The revenue values are adjusted for inflation to provide a more accurate picture of growth in real terms.</p>
<p><strong>Data Example:</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Example dataset: Nominal and inflation-adjusted revenue</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>revenue_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Year =</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Nominal_Revenue =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">105</span>, <span class="dv">110</span>, <span class="dv">120</span>, <span class="dv">130</span>, <span class="dv">135</span>),</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Inflation_Adjusted_Revenue =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">103</span>, <span class="dv">106</span>, <span class="dv">112</span>, <span class="dv">118</span>, <span class="dv">120</span>)  <span class="co"># Adjusted to 2015 dollars</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting nominal and inflation-adjusted revenue</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>p_revenue <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(revenue_data, <span class="fu">aes</span>(<span class="at">x =</span> Year)) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Nominal_Revenue, <span class="at">color =</span> <span class="st">"Nominal Revenue"</span>), <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Inflation_Adjusted_Revenue, <span class="at">color =</span> <span class="st">"Inflation-Adjusted Revenue"</span>), <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Nominal Revenue"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"Inflation-Adjusted Revenue"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Company Revenue Over Time (Nominal vs. Inflation-Adjusted)"</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Revenue (in millions)"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">color =</span> <span class="st">"Legend"</span>) <span class="sc">+</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p_revenue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*jQVSlIaes0y8TERYOP086A.png" class="img-fluid figure-img"></p>
<figcaption>Inflation Adjusted Revenue</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>In this chart, both nominal and inflation-adjusted revenue are plotted over time. The nominal revenue line (in blue) shows the raw revenue values, while the inflation-adjusted revenue line (in red) reflects the values adjusted to 2015 dollars.</li>
<li>This clear visual distinction helps the audience understand how the company’s revenue has changed in real terms, accounting for inflation.</li>
</ul>
</section>
<section id="example-currency-conversion" class="level3">
<h3 class="anchored" data-anchor-id="example-currency-conversion">Example: Currency Conversion</h3>
<p>When comparing data across different countries, currency conversion is often necessary. Let’s say we’re comparing the revenue of a company operating in both the United States and Europe, where the revenue needs to be converted from euros to U.S. dollars for consistency.</p>
<p><strong>Data Example:</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example dataset: Revenue in EUR and converted to USD</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>conversion_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Year =</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Revenue_EUR =</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">85</span>, <span class="dv">88</span>, <span class="dv">90</span>, <span class="dv">95</span>, <span class="dv">100</span>),  <span class="co"># Revenue in millions of EUR</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Revenue_USD =</span> <span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">92</span>, <span class="dv">95</span>, <span class="dv">100</span>, <span class="dv">104</span>, <span class="dv">110</span>)  <span class="co"># Converted to millions of USD (assume a conversion rate)</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting revenue in EUR and converted to USD</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>p_conversion <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(conversion_data, <span class="fu">aes</span>(<span class="at">x =</span> Year)) <span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Revenue_EUR, <span class="at">color =</span> <span class="st">"Revenue in EUR"</span>), <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Revenue_USD, <span class="at">color =</span> <span class="st">"Revenue in USD (Converted)"</span>), <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Revenue in EUR"</span> <span class="ot">=</span> <span class="st">"green4"</span>, <span class="st">"Revenue in USD (Converted)"</span> <span class="ot">=</span> <span class="st">"orange3"</span>)) <span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Company Revenue Over Time (EUR vs. USD Conversion)"</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Revenue (in millions)"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">color =</span> <span class="st">"Legend"</span>) <span class="sc">+</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p_conversion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/800/1*0nUsaco3pX_T0mpJOaI6aA.png" class="img-fluid figure-img"></p>
<figcaption>Currency Conversion</figcaption>
</figure>
</div>
<p><strong>Explanation:</strong></p>
<ul>
<li>This chart shows the revenue in euros and the corresponding converted revenue in U.S. dollars. The lines clearly distinguish between the original and converted values, allowing the audience to see how currency conversion impacts the reported figures.</li>
<li>By showing both the original and converted data, the chart provides transparency, helping the viewer understand the adjustments made for currency differences.</li>
</ul>
<p>Clearly indicating and explaining data adjustments, such as inflation adjustments or currency conversions, is essential for maintaining transparency and accuracy in data reporting. By visually distinguishing adjusted data from raw data and providing clear explanations of the adjustments, you help your audience understand the context and make informed decisions based on accurate and trustworthy information. The IBCS “Check” principle guides you to present these adjustments transparently, ensuring that your data visualizations are both informative and credible.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>In this episode, we’ve delved into the “Check” principle of the IBCS SUCCESS framework, emphasizing the importance of maintaining accuracy, transparency, and integrity in data visualization. As we’ve seen, even small decisions in how data is presented can have a significant impact on how it is interpreted. By adhering to the guidelines outlined in the “Check” principle, you ensure that your data visualizations are both truthful and effective.</p>
<p><strong>Key takeaways from this chapter include:</strong></p>
<p><strong>Avoiding Manipulated Axes</strong>:</p>
<ul>
<li>Ensure that axes are not truncated, logarithmic scales are used appropriately, and categorical axes are consistent. This prevents exaggeration or minimization of differences, leading to a more accurate representation of the data.</li>
</ul>
<p><strong>Avoiding Manipulated Visualization Elements</strong>:</p>
<ul>
<li>Use proper scaling for elements like bubbles or bars, avoid misleading 3D effects, and carefully handle scaling challenges, such as outliers. Properly scaled and well-chosen visual elements contribute to a more reliable interpretation of the data.</li>
</ul>
<p><strong>Avoiding Misleading Representation</strong>:</p>
<ul>
<li>Choose visualizations that accurately represent the data. Avoid using area or volume incorrectly, and prefer simple, clear visualizations over complex, decorative ones that might distort the data.</li>
</ul>
<p><strong>Using Consistent Scales Across Visuals</strong>:</p>
<ul>
<li>Maintain consistent scales across related charts to enable fair comparisons. Techniques like inset charts and scaling indicators can help manage differences in data magnitude without misleading the viewer.</li>
</ul>
<p><strong>Showing Data Adjustments Transparently</strong>:</p>
<ul>
<li>Clearly communicate when data has been adjusted, whether for inflation, currency conversion, or other factors. Use visual cues and annotations to explain the adjustments and their impact on the data, ensuring that the audience understands the true meaning of the figures.</li>
</ul>
<p>By following these best practices, you can create visualizations that not only convey the correct information but also build trust with your audience. The “Check” principle of the IBCS framework is about more than just avoiding errors—it’s about fostering a culture of transparency and precision in data communication.</p>
<p>As you continue to apply the IBCS standards in your reporting and BI work, remember that the integrity of your visualizations is paramount. Clear, accurate, and honest data presentation is the foundation of effective decision-making, and by rigorously “checking” your visualizations, you ensure that your insights are both credible and actionable.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>For everybody, not to be fooled by numbers</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>