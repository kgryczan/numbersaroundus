<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Numbers around us">
<meta name="dcterms.date" content="2025-01-28">

<title>Strategic Ranks and Groups: Mastering Data Battles with Ender’s Tactics – Numbers Around Us</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-cb71375167fd9ce754afb6fa31d3f44e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-1a65b4115a9519dac2c2f4ba2497ca08.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Numbers Around Us</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../last-articles.html"> 
<span class="menu-text">Newest articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../challenges/index.html"> 
<span class="menu-text">Challenges</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../bi/index.html"> 
<span class="menu-text">Business Intelligence</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../ds/index.html"> 
<span class="menu-text">Data Science</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../dp/index.html"> 
<span class="menu-text">Data Philosophy</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com" title="Github" class="quarto-navigation-tool px-1" aria-label="Github"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Strategic Ranks and Groups: Mastering Data Battles with Ender’s Tactics</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Numbers around us </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 28, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><img src="images/Groupingetc.jpg" class="img-fluid"></p>
<p>In a universe of infinite data, chaos often reigns supreme. Rows scatter aimlessly like unaligned fleets, groups form and dissolve without purpose, and insights remain hidden behind a veil of disorder. The task of making sense of this chaos may seem daunting, but just as Ender Wiggin brought strategy and leadership to the battlefield, data analysts can bring clarity and order to the datasets they face. Armed with tools like ranking functions, grouping techniques, and indexing strategies in R, we are the commanders of this data battlefield.</p>
<p>These tools are not just utilities; they are tactical maneuvers that allow us to slice, categorize, and prioritize information with precision. Whether it’s assigning ranks to highlight importance, grouping rows into meaningful clusters, or indexing to maintain order, these techniques transform raw data into structured, actionable insights. Inspired by Ender’s ability to think ahead and adapt to complex challenges, this article delves into the strategies you need to conquer your datasets and emerge victorious in the realm of data analysis.</p>
<section id="the-foundation-indexing-rows-with-precision" class="level3">
<h3 class="anchored" data-anchor-id="the-foundation-indexing-rows-with-precision"><strong>The Foundation: Indexing Rows with Precision</strong></h3>
<p>At the heart of every data manipulation task is the need for order—a way to systematically identify, track, and manage rows in a dataset. In R, indexing functions like <code>row_number()</code> provide a straightforward solution, enabling analysts to assign unique identifiers to rows within or across groups. Think of this as assigning fleet numbers to ships, ensuring no vessel is overlooked in the vastness of the battlefield.</p>
<p>Let’s explore how <code>row_number()</code> works in practice, using the built-in <strong><code>mtcars</code></strong> dataset. Imagine you’re analyzing car models grouped by the number of cylinders, and you want to assign a sequential row number to each car within its cylinder group. Here’s how it’s done:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required package</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign row numbers within each cylinder group</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>mtcars_with_row_number <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">row_id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mtcars_with_row_number[, <span class="fu">c</span>(<span class="st">"cyl"</span>, <span class="st">"mpg"</span>, <span class="st">"row_id"</span>)])</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 × 3</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>     cyl   mpg row_id</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>     <span class="dv">6</span>  <span class="dv">21</span>        <span class="dv">1</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>     <span class="dv">6</span>  <span class="dv">21</span>        <span class="dv">2</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>     <span class="dv">4</span>  <span class="fl">22.8</span>      <span class="dv">1</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>     <span class="dv">6</span>  <span class="fl">21.4</span>      <span class="dv">3</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>     <span class="dv">8</span>  <span class="fl">18.7</span>      <span class="dv">1</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">6</span>  <span class="fl">18.1</span>      <span class="dv">4</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>     <span class="dv">8</span>  <span class="fl">14.3</span>      <span class="dv">2</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>     <span class="dv">4</span>  <span class="fl">24.4</span>      <span class="dv">2</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>     <span class="dv">4</span>  <span class="fl">22.8</span>      <span class="dv">3</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>     <span class="dv">6</span>  <span class="fl">19.2</span>      <span class="dv">5</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 22 more rows</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ Use `print(n = ...)` to see more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This code groups the data by the <code>cyl</code> (cylinders) column and assigns a sequential <code>row_id</code> to each car within its group. The resulting dataset maintains the original structure but now includes a new column, <code>row_id</code>, to help track each car within its group.</p>
<p><strong>When to Use It:</strong></p>
<ul>
<li><p>Assigning sequential IDs for grouped data analysis.</p></li>
<li><p>Tracking the order of observations within specific categories.</p></li>
<li><p>Generating clean datasets with clearly labeled rows.</p></li>
</ul>
<p>By starting with indexing, we lay the foundation for all subsequent operations, ensuring that every row is accounted for before diving into more advanced techniques.</p>
</section>
<section id="grouping-rows-building-order-from-chaos" class="level3">
<h3 class="anchored" data-anchor-id="grouping-rows-building-order-from-chaos"><strong>Grouping Rows: Building Order from Chaos</strong></h3>
<p>In the same way Ender organized his fleet into formations for maximum efficiency, grouping rows in a dataset brings structure to what might otherwise be disarray. Grouping allows you to perform operations within defined subsets of data, ensuring that calculations, summaries, or transformations are applied to the right rows. In R, the <code>group_by()</code> function from the <code>dplyr</code> package is a powerful tool for this purpose.</p>
<p>Let’s consider the <strong><code>mtcars</code></strong> dataset again. Suppose you want to calculate the average miles per gallon (<code>mpg</code>) for each group of cars, categorized by the number of cylinders. This is a classic use case for grouping:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping data and summarizing within groups</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>average_mpg_by_cyl <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_mpg =</span> <span class="fu">mean</span>(mpg, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(average_mpg_by_cyl)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    cyl avg_mpg</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">4</span>    <span class="fl">26.7</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">6</span>    <span class="fl">19.7</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">8</span>    <span class="fl">15.1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation:</strong></p>
<ul>
<li><p>The <code>group_by(cyl)</code> step divides the dataset into groups based on the <code>cyl</code> column.</p></li>
<li><p>The <code>summarize()</code> function computes the average miles per gallon (<code>mpg</code>) within each group.</p></li>
<li><p><code>.groups = "drop"</code> ensures the grouping structure is removed after summarization, returning a clean result.</p></li>
</ul>
<p>Here, the result clearly shows the average fuel efficiency for cars with 4, 6, and 8 cylinders—an insight that might have been obscured without grouping.</p>
<p><strong>When to Use It:</strong></p>
<ul>
<li><p>Aggregating statistics like sums, means, or medians for subsets of data.</p></li>
<li><p>Identifying trends or patterns within distinct groups.</p></li>
<li><p>Performing group-specific transformations or filtering.</p></li>
</ul>
<p>By using <code>group_by()</code>, we’ve taken a crucial step toward understanding our data. Like organizing a fleet into battalions, grouping ensures that every subset of data is ready for the next stage of analysis.</p>
</section>
<section id="ranking-rows-prioritizing-the-battlefield" class="level3">
<h3 class="anchored" data-anchor-id="ranking-rows-prioritizing-the-battlefield"><strong>Ranking Rows: Prioritizing the Battlefield</strong></h3>
<p>In battle, prioritization is critical. Ender often relied on strategies to rank threats and opportunities, focusing on the most crucial targets first. Similarly, ranking functions in R help analysts identify and prioritize rows based on specific criteria. Whether you’re sorting cars by fuel efficiency or customers by their purchase history, ranking provides a structured way to assess importance within groups.</p>
<p>Let’s continue with the <strong><code>mtcars</code></strong> dataset. Suppose you want to rank cars by their miles per gallon (<code>mpg</code>) within each cylinder (<code>cyl</code>) group, with the highest <code>mpg</code> receiving the top rank:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rank cars by mpg within each cylinder group</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ranked_cars <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank_within_cyl =</span> <span class="fu">rank</span>(<span class="sc">-</span>mpg)) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ranked_cars[, <span class="fu">c</span>(<span class="st">"cyl"</span>, <span class="st">"mpg"</span>, <span class="st">"rank_within_cyl"</span>)])</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 × 3</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>     cyl   mpg rank_within_cyl</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>           <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>     <span class="dv">6</span>  <span class="dv">21</span>               <span class="fl">2.5</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>     <span class="dv">6</span>  <span class="dv">21</span>               <span class="fl">2.5</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>     <span class="dv">4</span>  <span class="fl">22.8</span>             <span class="fl">8.5</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>     <span class="dv">6</span>  <span class="fl">21.4</span>             <span class="dv">1</span>  </span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>     <span class="dv">8</span>  <span class="fl">18.7</span>             <span class="dv">2</span>  </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">6</span>  <span class="fl">18.1</span>             <span class="dv">6</span>  </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>     <span class="dv">8</span>  <span class="fl">14.3</span>            <span class="dv">11</span>  </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>     <span class="dv">4</span>  <span class="fl">24.4</span>             <span class="dv">7</span>  </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>     <span class="dv">4</span>  <span class="fl">22.8</span>             <span class="fl">8.5</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>     <span class="dv">6</span>  <span class="fl">19.2</span>             <span class="dv">5</span>  </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 22 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation:</strong></p>
<ul>
<li><p>The <code>group_by(cyl)</code> step organizes the cars into groups based on their cylinder count.</p></li>
<li><p>The <code>mutate(rank_within_cyl = rank(-mpg))</code> assigns ranks within each group, with the highest <code>mpg</code> (indicated by the negative sign) receiving a rank of 1.</p></li>
<li><p><code>ungroup()</code> removes the grouping structure, leaving a fully ranked dataset.</p></li>
</ul>
<p>Here, cars within each cylinder group are ranked by their fuel efficiency, allowing you to quickly identify the top-performing models.</p>
<p><strong>Ranking Variations:</strong><br>
R provides several other ranking options:</p>
<ul>
<li><p><strong><code>dense_rank()</code></strong>: Produces compact ranks without skipping numbers for ties.</p></li>
<li><p><strong><code>min_rank()</code></strong>: Assigns the smallest rank for ties but skips numbers in between.</p></li>
<li><p><strong><code>percent_rank()</code></strong>: Computes the percentile rank for each value.</p></li>
</ul>
<p><strong>When to Use Ranking:</strong></p>
<ul>
<li><p>Prioritizing rows based on performance or importance.</p></li>
<li><p>Analyzing top or bottom performers in grouped datasets.</p></li>
<li><p>Creating ordered subsets for further analysis or visualization.</p></li>
</ul>
<p>Ranking is a tactical maneuver that brings focus and clarity to the data battlefield. Like Ender’s ability to assess the battlefield, ranking ensures that critical data points are identified and acted upon first.</p>
</section>
<section id="cumulative-operations-tracking-the-flow-of-data" class="level3">
<h3 class="anchored" data-anchor-id="cumulative-operations-tracking-the-flow-of-data"><strong>Cumulative Operations: Tracking the Flow of Data</strong></h3>
<p>In a dynamic battlefield, Ender relied on cumulative intelligence to track progress, identify patterns, and anticipate movements. Similarly, cumulative operations in R allow us to observe trends over time or within groups by calculating running totals or sequential patterns. Functions like <code>cumsum()</code> and <code>cummean()</code> in R are particularly useful for these tasks.</p>
<p>Let’s explore how to use <strong><code>cumsum()</code></strong> to track cumulative miles per gallon (<code>mpg</code>) for cars in the <strong><code>mtcars</code></strong> dataset, grouped by the number of cylinders (<code>cyl</code>):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate cumulative miles per gallon within each cylinder group</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>cumulative_mpg <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(cyl, mpg) <span class="sc">%&gt;%</span> <span class="co"># Ensure data is ordered by mpg within each group</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cum_mpg =</span> <span class="fu">cumsum</span>(mpg)) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cumulative_mpg[, <span class="fu">c</span>(<span class="st">"cyl"</span>, <span class="st">"mpg"</span>, <span class="st">"cum_mpg"</span>)])</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 × 3</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>     cyl   mpg cum_mpg</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>     <span class="dv">4</span>  <span class="fl">21.4</span>    <span class="fl">21.4</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>     <span class="dv">4</span>  <span class="fl">21.5</span>    <span class="fl">42.9</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>     <span class="dv">4</span>  <span class="fl">22.8</span>    <span class="fl">65.7</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>     <span class="dv">4</span>  <span class="fl">22.8</span>    <span class="fl">88.5</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>     <span class="dv">4</span>  <span class="fl">24.4</span>   <span class="fl">113.</span> </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">4</span>  <span class="dv">26</span>     <span class="fl">139.</span> </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>     <span class="dv">4</span>  <span class="fl">27.3</span>   <span class="fl">166.</span> </span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>     <span class="dv">4</span>  <span class="fl">30.4</span>   <span class="fl">197.</span> </span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>     <span class="dv">4</span>  <span class="fl">30.4</span>   <span class="dv">227</span>  </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>     <span class="dv">4</span>  <span class="fl">32.4</span>   <span class="fl">259.</span> </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 22 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation:</strong></p>
<ul>
<li><p>The <code>arrange(cyl, mpg)</code> step sorts cars by <code>cyl</code> (primary grouping) and <code>mpg</code> (secondary sorting within groups).</p></li>
<li><p>The <code>group_by(cyl)</code> organizes the data by the number of cylinders.</p></li>
<li><p>The <code>mutate(cum_mpg = cumsum(mpg))</code> calculates the cumulative <code>mpg</code> within each cylinder group.</p></li>
<li><p><code>ungroup()</code> ensures no residual grouping remains, making the dataset ready for further operations.</p></li>
</ul>
<p><strong>Applications of Cumulative Operations:</strong></p>
<ol type="1">
<li><p><strong>Tracking Totals:</strong> Calculate running totals for numeric variables (e.g., cumulative sales, total scores).</p></li>
<li><p><strong>Monitoring Trends:</strong> Observe how a variable grows or changes over time or within groups.</p></li>
<li><p><strong>Segment Analysis:</strong> Split cumulative sums into manageable segments for further insights.</p></li>
</ol>
<p><strong>Going Beyond <code>cumsum()</code>:</strong></p>
<ul>
<li><p>Use <strong><code>cummean()</code></strong> to calculate the running average of a variable.</p></li>
<li><p>Use <strong><code>cummax()</code></strong> or <strong><code>cummin()</code></strong> to track the maximum or minimum values reached over time.</p></li>
</ul>
<p>Cumulative operations are vital tools in data analysis, enabling you to see the big picture while also tracking incremental changes. Much like Ender’s ability to think several steps ahead, these techniques allow analysts to forecast trends and prepare for future movements.</p>
</section>
<section id="advanced-grouping-unlocking-hidden-structures" class="level3">
<h3 class="anchored" data-anchor-id="advanced-grouping-unlocking-hidden-structures"><strong>Advanced Grouping: Unlocking Hidden Structures</strong></h3>
<p>In the heat of battle, Ender excelled at recognizing hidden patterns and hierarchies within complex systems. Similarly, advanced grouping techniques in R allow us to uncover deeper insights by combining multiple variables or leveraging custom conditions to segment data. These methods extend beyond basic grouping, offering granular control over how data is organized and analyzed.</p>
<p>Let’s dive into an example using the <strong><code>mtcars</code></strong> dataset. Suppose you want to analyze the combined effects of the number of cylinders (<code>cyl</code>) and the type of transmission (<code>am</code>, where 0 = automatic, 1 = manual) on fuel efficiency (<code>mpg</code>).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping by multiple variables and calculating summaries</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>grouped_analysis <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl, am) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_mpg =</span> <span class="fu">mean</span>(mpg, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_mpg =</span> <span class="fu">max</span>(mpg, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">car_count =</span> <span class="fu">n</span>(),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(grouped_analysis)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 5</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    cyl    am avg_mpg max_mpg car_count</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">0</span>    <span class="fl">22.9</span>    <span class="fl">24.4</span>         <span class="dv">3</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">4</span>     <span class="dv">1</span>    <span class="fl">28.1</span>    <span class="fl">33.9</span>         <span class="dv">8</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">6</span>     <span class="dv">0</span>    <span class="fl">19.1</span>    <span class="fl">21.4</span>         <span class="dv">4</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">6</span>     <span class="dv">1</span>    <span class="fl">20.6</span>    <span class="dv">21</span>           <span class="dv">3</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">8</span>     <span class="dv">0</span>    <span class="fl">15.0</span>    <span class="fl">19.2</span>        <span class="dv">12</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>     <span class="dv">8</span>     <span class="dv">1</span>    <span class="fl">15.4</span>    <span class="fl">15.8</span>         <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation:</strong></p>
<ul>
<li><p>The <code>group_by(cyl, am)</code> step creates hierarchical groups based on both the number of cylinders and transmission type.</p></li>
<li><p>The <code>summarize()</code> function calculates:</p>
<ul>
<li><p><code>avg_mpg</code>: Average fuel efficiency within each group.</p></li>
<li><p><code>max_mpg</code>: The highest fuel efficiency within each group.</p></li>
<li><p><code>car_count</code>: The total number of cars in each group.</p></li>
</ul></li>
<li><p><code>.groups = "drop"</code> ensures the grouping structure is removed after summarization, returning a clean result.</p></li>
</ul>
<p>Here, you can see how the grouping by two variables reveals insights about how <code>mpg</code> varies by cylinder count and transmission type. This analysis might show, for instance, that manual transmission cars generally have higher fuel efficiency.</p>
<p><strong>Applications of Advanced Grouping:</strong></p>
<ol type="1">
<li><p><strong>Hierarchical Summaries:</strong> Group data by multiple dimensions to analyze complex relationships.</p></li>
<li><p><strong>Custom Group Definitions:</strong> Use conditional statements or calculated fields for dynamic grouping.</p></li>
<li><p><strong>Comparative Analysis:</strong> Compare performance or behavior across nested groups.</p></li>
</ol>
<p><strong>Advanced Tip:</strong> Combine <code>group_by()</code> with filtering or ranking functions to isolate and analyze specific subsets of your data, such as the top-performing groups.</p>
<p>Advanced grouping is the backbone of in-depth analysis, allowing you to break down complex datasets into manageable, meaningful structures. Just as Ender identified hierarchies within enemy forces, these techniques let you navigate the intricacies of your data with precision.</p>
</section>
<section id="assigning-unique-group-identifiers-mastering-consecutive_id" class="level3">
<h3 class="anchored" data-anchor-id="assigning-unique-group-identifiers-mastering-consecutive_id"><strong>Assigning Unique Group Identifiers: Mastering <code>consecutive_id()</code></strong></h3>
<p>In a battle, recognizing and labeling unique formations or clusters is essential for understanding their movements. Similarly, when working with real-world datasets, it’s often necessary to assign unique identifiers to groups based on sequential patterns or specific conditions. This is where the <code>consecutive_id()</code> function from the <strong><code>dplyr</code></strong> package shines.</p>
<p>The <code>consecutive_id()</code> function generates unique group IDs for distinct values as they appear consecutively in a dataset. Let’s see it in action using a simulated dataset of event logs.</p>
<section id="scenario" class="level4">
<h4 class="anchored" data-anchor-id="scenario"><strong>Scenario:</strong></h4>
<p>Imagine you have a dataset of server logs, and you want to assign unique IDs to each session, defined by consecutive timestamps grouped by a user ID.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dplyr</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Example data: Event logs</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>event_logs <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">user_id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">event_time =</span> <span class="fu">as.POSIXct</span>(<span class="fu">c</span>(</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2023-01-01 10:00"</span>, <span class="st">"2023-01-01 10:01"</span>, </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2023-01-01 10:05"</span>, <span class="st">"2023-01-01 10:07"</span>, </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2023-01-01 11:00"</span>, <span class="st">"2023-01-01 11:05"</span>, </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2023-01-01 11:10"</span>, <span class="st">"2023-01-01 11:15"</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  )),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">action =</span> <span class="fu">c</span>(<span class="st">"login"</span>, <span class="st">"click"</span>, <span class="st">"login"</span>, <span class="st">"click"</span>, <span class="st">"login"</span>, <span class="st">"click"</span>, <span class="st">"login"</span>, <span class="st">"click"</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign unique session IDs based on user and event continuity</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>event_logs_with_ids <span class="ot">&lt;-</span> event_logs <span class="sc">%&gt;%</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">session_id =</span> <span class="fu">consecutive_id</span>(user_id))</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(event_logs_with_ids)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 8 × 4</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  user_id event_time          action session_id</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dttm<span class="sc">&gt;</span>              <span class="er">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>       <span class="dv">1</span> <span class="dv">2023-01-01</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span> login           <span class="dv">1</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>       <span class="dv">1</span> <span class="dv">2023-01-01</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">01</span><span class="sc">:</span><span class="dv">00</span> click           <span class="dv">1</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>       <span class="dv">2</span> <span class="dv">2023-01-01</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">05</span><span class="sc">:</span><span class="dv">00</span> login           <span class="dv">2</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>       <span class="dv">2</span> <span class="dv">2023-01-01</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">07</span><span class="sc">:</span><span class="dv">00</span> click           <span class="dv">2</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>       <span class="dv">1</span> <span class="dv">2023-01-01</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span> login           <span class="dv">3</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>       <span class="dv">1</span> <span class="dv">2023-01-01</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">05</span><span class="sc">:</span><span class="dv">00</span> click           <span class="dv">3</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>       <span class="dv">2</span> <span class="dv">2023-01-01</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">10</span><span class="sc">:</span><span class="dv">00</span> login           <span class="dv">4</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>       <span class="dv">2</span> <span class="dv">2023-01-01</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">00</span> click           <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation:</strong></p>
<ol type="1">
<li><p><strong>Dataset Description:</strong><br>
The <code>event_logs</code> dataset contains:</p>
<ul>
<li><p><code>user_id</code>: Identifies the user performing the event.</p></li>
<li><p><code>event_time</code>: Timestamps of each event.</p></li>
<li><p><code>action</code>: The type of action performed.</p></li>
</ul></li>
<li><p><strong><code>consecutive_id(user_id)</code>:</strong></p>
<ul>
<li><p>Generates a new column, <code>session_id</code>, which assigns a unique ID for each block of consecutive rows with the same <code>user_id</code>.</p></li>
<li><p>The IDs are updated whenever a break in the sequence is detected.</p></li>
</ul></li>
</ol>
<p><strong>Use Cases for <code>consecutive_id()</code>:</strong></p>
<ol type="1">
<li><p><strong>Session Identification:</strong><br>
Grouping events into sessions based on users or time-based continuity.</p></li>
<li><p><strong>Sequential Data Analysis:</strong><br>
Assigning unique IDs to streaks, runs, or time-based clusters.</p></li>
<li><p><strong>Detecting Pattern Breaks:</strong><br>
Labeling segments in time-series data when a variable changes.</p></li>
</ol>
<p><strong>Advanced Tip:</strong> Pair <code>consecutive_id()</code> with time-based filters (e.g., <code>lag()</code> or <code>difftime()</code>) to refine session definitions, such as detecting gaps between consecutive events.<br>
</p>
<p><strong>Key Takeaway:</strong><br>
The <code>consecutive_id()</code> function is a versatile tool for assigning group identifiers based on sequence and continuity, making it invaluable for working with time-series or session-based datasets. Much like Ender’s ability to distinguish one fleet from another, this function ensures that each group is uniquely and accurately identified.</p>
<p>V</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>For everybody, not to be fooled by numbers</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>